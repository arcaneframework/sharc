// ------------------------------------------------------------------------------
//  <autogenerated>
//      This code was generated by a tool.
//      Mono Runtime Version: 4.0.30319.17020
// 
//      Changes to this file may cause incorrect behavior and will be lost if 
//      the code is regenerated.
//  </autogenerated>
// ------------------------------------------------------------------------------

namespace LawCompiler {
    using System.Linq;
    using System.Text;
    using System.Collections.Generic;
    using LawCompiler;
    using System;
    
    
    public partial class LawServiceHeaderT4 : LawServiceHeaderT4Base {
        
        public virtual string TransformText() {
            this.GenerationEnvironment = null;
            
            #line 6 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"

  var all_properties = new List<Property> ();
  all_properties.AddRange(Inputs);
  all_properties.AddRange(Outputs);
  all_properties.AddRange(Parameters);
  var static_size = Inputs.Where(p => p.dimension == Dimension.scalar).ToList().Count;

            
            #line default
            #line hidden
            
            #line 13 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("// ------------------------------------------------------------------------------\n//  <autogenerated>\n//      This code was generated by a tool. \n//      Changes to this file may cause incorrect behavior and will be lost if \n//      the code is regenerated.\n//  </autogenerated>\n// ------------------------------------------------------------------------------\n#ifndef ARCGEOSIM_GENERATED_");
            
            #line default
            #line hidden
            
            #line 20 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name.ToUpper() ));
            
            #line default
            #line hidden
            
            #line 20 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LAWOBJECT_H\n#define ARCGEOSIM_GENERATED_");
            
            #line default
            #line hidden
            
            #line 21 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name.ToUpper() ));
            
            #line default
            #line hidden
            
            #line 21 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LAWOBJECT_H\n\n/*---------------------------------------------------------------------------*/\n/*---------------------------------------------------------------------------*/\n\n#include \"ArcGeoSim/Physics/Law2/IFunction.h\"\n\n#include \"");
            
            #line default
            #line hidden
            
            #line 28 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 28 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("_axl.h\"\n\n#include \"ArcGeoSim/Gump/XPath.h\"\n\n/*---------------------------------------------------------------------------*/\n/*---------------------------------------------------------------------------*/\n\nclass ");
            
            #line default
            #line hidden
            
            #line 35 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 35 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LawObject\n  : public Arcane");
            
            #line default
            #line hidden
            
            #line 36 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 36 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("Object\n{\nprivate:\n\n  template<typename T>\n  class Evaluator\n    : public Law::IEvaluator\n  {\n  public:\n\n    Evaluator(const T& algo,");
            
            #line default
            #line hidden
            
            #line 46 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
All.Select(e => String.Format("const {0}& {1}", e.PropertyType, e.Name))
  .AtBegin(Space.Create(14)).AtBegin("\n").Pack(",") ));
            
            #line default
            #line hidden
            
            #line 48 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(")\n      : m_algo(algo)");
            
            #line default
            #line hidden
            
            #line 49 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
All.Select(e => String.Format("m_{0}({0})",e.Name))
  .AtBegin(", ").AtBegin(Space.Create(6)).AtBegin("\n").Pack() ));
            
            #line default
            #line hidden
            
            #line 51 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" {}\n\n    void evaluate(const Law::State& s,\n                        Law::State& r) const { /* deprecated */ }\n\n    void evaluate(const Law::State& s,\n                        Law::State& r,\n                        Law::Derivative& d) const { /* deprecated */ }\n\n    void evaluate(const Law::VariableAccessor& accessor,\n                  const Arcane::ItemGroup& group,\n                  const Law::eDerivative mode) const;\n\n    void evaluate(const Law::PartialVariableAccessor& accessor,\n                  const Arcane::ItemGroup& group,\n                  const Law::eDerivative mode) const;\n\n    void evaluate(const Law::ArrayAccessor& accessor,\n                  const Arcane::Integer& begin,\n                  const Arcane::Integer& end,\n                  const Law::eDerivative mode) const;\n\n  private:\n\n    const T& m_algo;\n");
            
            #line default
            #line hidden
            
            #line 76 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 
  foreach(var p in All) { 

            
            #line default
            #line hidden
            
            #line 79 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    const ");
            
            #line default
            #line hidden
            
            #line 79 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 79 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("& m_");
            
            #line default
            #line hidden
            
            #line 79 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 79 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(";\n");
            
            #line default
            #line hidden
            
            #line 80 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 
  }

            
            #line default
            #line hidden
            
            #line 83 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" \n  };\n\nprotected:\n\n  template<typename T>\n  std::unique_ptr<Law::IEvaluator> algorithm(const T& algo)\n  {\n    auto* evaluator = new ");
            
            #line default
            #line hidden
            
            #line 91 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 91 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LawObject::Evaluator<T>(algo,");
            
            #line default
            #line hidden
            
            #line 91 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(
All.Select(e => "m_" + e.Name).AtBegin(Space.Create(10)).AtBegin("\n").Pack(",") ));
            
            #line default
            #line hidden
            
            #line 92 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n\n    return std::unique_ptr<Law::IEvaluator>(evaluator);\n  }\n\npublic:\n\n  ");
            
            #line default
            #line hidden
            
            #line 99 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 99 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LawObject(const Arcane::ServiceBuildInfo& sbi,\n                           std::unique_ptr<Law::IEvaluator>&& evaluator)\n    : Arcane");
            
            #line default
            #line hidden
            
            #line 101 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 101 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("Object(sbi)\n    , m_initialized(false)\n    , m_evaluator(std::move(evaluator)) {}\n\npublic:\n\n  // A implementer par l'utilisateur\n  virtual void configure() = 0;\n\nprotected:\n\n  // Acces utilisateur\n \n  const Gump::Entity& entity() const { return m_root; } \n \n");
            
            #line default
            #line hidden
            
            #line 116 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in All) { 
            
            #line default
            #line hidden
            
            #line 117 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" \n  ");
            
            #line default
            #line hidden
            
            #line 118 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 118 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("& ");
            
            #line default
            #line hidden
            
            #line 118 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.ObjectName ));
            
            #line default
            #line hidden
            
            #line 118 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("() { return m_");
            
            #line default
            #line hidden
            
            #line 118 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 118 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("; }\n");
            
            #line default
            #line hidden
            
            #line 119 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 120 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" \n\npublic:\n\n  void init() { init(m_root); }\n  \n  void init(Gump::Entity root);\n  \n  Arcane::Integer id() const { return 0; }\n\n  void evaluate(const Law::State& s,\n                      Law::State& r) const \n  { \n    fatal() << \"Evaluation with state is not yet supported\";\n  }\n\n  void evaluate(const Law::State& s,\n                      Law::State& r,\n                      Law::Derivative& d) const \n  { \n    fatal() << \"Evaluation with state is not yet supported\";\n  }\n\n  const Law::PropertyVector& in() const { return m_inputs; }\n  \n  const Law::PropertyVector& out() const { return m_outputs; }\n\n  const Law::PropertyVector& parameters() const { return m_parameters; }\n\n  bool isDifferentiable() const { return ");
            
            #line default
            #line hidden
            
            #line 149 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( (Law.differentiable) ? "true" : "false" ));
            
            #line default
            #line hidden
            
            #line 149 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("; }\n  \n  void evaluate(const Law::VariableAccessor& accessor,            \n                const Arcane::ItemGroup& group,\n                const Law::eDerivative mode) const\n  {\n    if(not m_initialized) \n      fatal() << \"");
            
            #line default
            #line hidden
            
            #line 156 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 156 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" law is not initialized, call init() method before evaluation\";\n    m_evaluator->evaluate(accessor, group, mode);\n  }\n  \n  void evaluate(const Law::PartialVariableAccessor& accessor,            \n                const Arcane::ItemGroup& group,\n                const Law::eDerivative mode) const\n  {\n    if(not m_initialized) \n      fatal() << \"");
            
            #line default
            #line hidden
            
            #line 165 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 165 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" law is not initialized, call init() method before evaluation\";\n    m_evaluator->evaluate(accessor, group, mode);\n  }\n\n  void evaluate(const Law::ArrayAccessor& accessor,            \n                const Arcane::Integer& begin,\n                const Arcane::Integer& end,\n                const Law::eDerivative mode) const\n  {\n    if(not m_initialized) \n      fatal() << \"");
            
            #line default
            #line hidden
            
            #line 175 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 175 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" law is not initialized, call init() method before evaluation\";\n    m_evaluator->evaluate(accessor, begin, end, mode);\n  }\n \nprivate:\n \n  bool m_initialized;\n\n");
            
            #line default
            #line hidden
            
            #line 183 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in All) { 
            
            #line default
            #line hidden
            
            #line 184 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  ");
            
            #line default
            #line hidden
            
            #line 184 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 184 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" m_");
            
            #line default
            #line hidden
            
            #line 184 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 184 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(";\n");
            
            #line default
            #line hidden
            
            #line 185 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 186 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" \n  \n  Gump::Entity m_root;\n\n  std::unique_ptr<Law::IEvaluator> m_evaluator;\n\n  Law::PropertyVector m_inputs;\n  Law::PropertyVector m_outputs;\n  Law::PropertyVector m_parameters;\n};\n\n/*---------------------------------------------------------------------------*/\n/*---------------------------------------------------------------------------*/\n\ntemplate<typename T>\nvoid\n");
            
            #line default
            #line hidden
            
            #line 202 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 202 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LawObject::Evaluator<T>::\nevaluate(const Law::VariableAccessor& accessor,\n         const Arcane::ItemGroup& group,\n         const Law::eDerivative mode) const\n{\n  switch(mode)\n  {\n  case Law::WithoutDerivative :\n  {\n");
            
            #line default
            #line hidden
            
            #line 211 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in All) { 
            
            #line default
            #line hidden
            
            #line 212 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& ");
            
            #line default
            #line hidden
            
            #line 212 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 212 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.values(m_");
            
            #line default
            #line hidden
            
            #line 212 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 212 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 213 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 214 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    ENUMERATE_ITEM(iitem, group) {\n      m_algo.evaluate(");
            
            #line default
            #line hidden
            
            #line 215 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( All.Select(e => e.Name + "[iitem]").Pack(",") ));
            
            #line default
            #line hidden
            
            #line 215 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n    }\n  }\n  break;\n  case Law::WithDerivative :\n");
            
            #line default
            #line hidden
            
            #line 220 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 if(Law.differentiable == true) { 
            
            #line default
            #line hidden
            
            #line 221 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  {\n");
            
            #line default
            #line hidden
            
            #line 222 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in All) { 
            
            #line default
            #line hidden
            
            #line 223 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& ");
            
            #line default
            #line hidden
            
            #line 223 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 223 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.values(m_");
            
            #line default
            #line hidden
            
            #line 223 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 223 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 224 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
  
   foreach(var p in Outputs) { 
            
            #line default
            #line hidden
            
            #line 227 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& d");
            
            #line default
            #line hidden
            
            #line 227 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 227 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.derivatives(m_");
            
            #line default
            #line hidden
            
            #line 227 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 227 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 228 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 229 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto size = ");
            
            #line default
            #line hidden
            
            #line 229 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( static_size ));
            
            #line default
            #line hidden
            
            #line 229 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
Inputs.Where(p => p.dimension == Dimension.vectorial)
      .Select(p => String.Format(" + m_{0}.size()", p.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 231 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(";\n");
            
            #line default
            #line hidden
            
            #line 232 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in Outputs.Where(p => p.dimension == Dimension.scalar)) { 
            
            #line default
            #line hidden
            
            #line 233 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    d");
            
            #line default
            #line hidden
            
            #line 233 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 233 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".resize(size);\n");
            
            #line default
            #line hidden
            
            #line 234 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 }
   foreach(var p in Outputs.Where(p => p.dimension == Dimension.vectorial)) { 
            
            #line default
            #line hidden
            
            #line 236 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    d");
            
            #line default
            #line hidden
            
            #line 236 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 236 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".resize(m_");
            
            #line default
            #line hidden
            
            #line 236 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 236 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".size(), size);\n");
            
            #line default
            #line hidden
            
            #line 237 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 238 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    ENUMERATE_ITEM(iitem, group) {\n      m_algo.evaluate(");
            
            #line default
            #line hidden
            
            #line 239 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
         Inputs.Select(e => String.Format("{0}[iitem],", e.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 240 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
        Outputs.Select(e => String.Format("{0}[iitem],d{0}[iitem]", e.Name)).Pack(",") ));
            
            #line default
            #line hidden
            
            #line 241 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
     Parameters.Select(e => String.Format(",{0}[iitem]", e.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 242 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n    }\n  }\n");
            
            #line default
            #line hidden
            
            #line 245 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 
  } else { 

            
            #line default
            #line hidden
            
            #line 248 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    fatal() << \"Law ");
            
            #line default
            #line hidden
            
            #line 248 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 248 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" is not differentiable\";\n");
            
            #line default
            #line hidden
            
            #line 249 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 
  }

            
            #line default
            #line hidden
            
            #line 252 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  break;\n  default:\n    throw Arcane::FatalErrorException(\"evaluation case default error\");\n  }\n}\n\n/*---------------------------------------------------------------------------*/\n\ntemplate<typename T>\nvoid\n");
            
            #line default
            #line hidden
            
            #line 262 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 262 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LawObject::Evaluator<T>::\nevaluate(const Law::PartialVariableAccessor& accessor,\n         const Arcane::ItemGroup& group,\n         const Law::eDerivative mode) const\n{\n  switch(mode)\n  {\n  case Law::WithoutDerivative :\n  {\n");
            
            #line default
            #line hidden
            
            #line 271 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in All) { 
            
            #line default
            #line hidden
            
            #line 272 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& ");
            
            #line default
            #line hidden
            
            #line 272 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 272 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.values(m_");
            
            #line default
            #line hidden
            
            #line 272 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 272 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 273 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 274 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    ENUMERATE_ITEM(iitem, group) {\n      m_algo.evaluate(");
            
            #line default
            #line hidden
            
            #line 275 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( All.Select(e => e.Name + "[iitem]").Pack(",") ));
            
            #line default
            #line hidden
            
            #line 275 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n    }\n  }\n  break;\n  case Law::WithDerivative :\n");
            
            #line default
            #line hidden
            
            #line 280 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 if(Law.differentiable == true) { 
            
            #line default
            #line hidden
            
            #line 281 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  {\n");
            
            #line default
            #line hidden
            
            #line 282 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in All) { 
            
            #line default
            #line hidden
            
            #line 283 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& ");
            
            #line default
            #line hidden
            
            #line 283 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 283 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.values(m_");
            
            #line default
            #line hidden
            
            #line 283 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 283 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 284 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
  
   foreach(var p in Outputs) { 
            
            #line default
            #line hidden
            
            #line 287 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& d");
            
            #line default
            #line hidden
            
            #line 287 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 287 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.derivatives(m_");
            
            #line default
            #line hidden
            
            #line 287 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 287 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 288 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 289 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto size = ");
            
            #line default
            #line hidden
            
            #line 289 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( static_size ));
            
            #line default
            #line hidden
            
            #line 289 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
Inputs.Where(p => p.dimension == Dimension.vectorial)
      .Select(p => String.Format(" + m_{0}.size()", p.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 291 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(";\n");
            
            #line default
            #line hidden
            
            #line 292 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in Outputs.Where(p => p.dimension == Dimension.scalar)) { 
            
            #line default
            #line hidden
            
            #line 293 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    d");
            
            #line default
            #line hidden
            
            #line 293 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 293 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".resize(size);\n");
            
            #line default
            #line hidden
            
            #line 294 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 }
   foreach(var p in Outputs.Where(p => p.dimension == Dimension.vectorial)) { 
            
            #line default
            #line hidden
            
            #line 296 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    d");
            
            #line default
            #line hidden
            
            #line 296 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 296 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".resize(m_");
            
            #line default
            #line hidden
            
            #line 296 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 296 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".size(), size);\n");
            
            #line default
            #line hidden
            
            #line 297 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 298 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    ENUMERATE_ITEM(iitem, group) {\n      m_algo.evaluate(");
            
            #line default
            #line hidden
            
            #line 299 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
         Inputs.Select(e => String.Format("{0}[iitem],", e.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 300 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
        Outputs.Select(e => String.Format("{0}[iitem],d{0}[iitem]", e.Name)).Pack(",") ));
            
            #line default
            #line hidden
            
            #line 301 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
     Parameters.Select(e => String.Format(",{0}[iitem]", e.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 302 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n    }\n  }\n");
            
            #line default
            #line hidden
            
            #line 305 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 
  } else { 

            
            #line default
            #line hidden
            
            #line 308 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    fatal() << \"Law ");
            
            #line default
            #line hidden
            
            #line 308 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 308 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" is not differentiable\";\n");
            
            #line default
            #line hidden
            
            #line 309 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 
  }

            
            #line default
            #line hidden
            
            #line 312 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  break;\n  default:\n    throw Arcane::FatalErrorException(\"evaluation case default error\");\n  }\n}\n\n/*---------------------------------------------------------------------------*/\n\ntemplate<typename T>\nvoid\n");
            
            #line default
            #line hidden
            
            #line 322 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 322 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LawObject::Evaluator<T>::\nevaluate(const Law::ArrayAccessor& accessor,\n         const Arcane::Integer& begin,\n         const Arcane::Integer& end,\n         const Law::eDerivative mode) const\n{\n  switch(mode)\n  {\n  case Law::WithoutDerivative :\n  {\n");
            
            #line default
            #line hidden
            
            #line 332 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in All) { 
            
            #line default
            #line hidden
            
            #line 333 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& ");
            
            #line default
            #line hidden
            
            #line 333 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 333 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.values(m_");
            
            #line default
            #line hidden
            
            #line 333 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 333 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 334 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 335 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    for(int i = begin; i < end; ++i) {\n      m_algo.evaluate(");
            
            #line default
            #line hidden
            
            #line 336 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( All.Select(e => e.Name + "[i]").Pack(",") ));
            
            #line default
            #line hidden
            
            #line 336 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n    }\n  }\n  break;\n  case Law::WithDerivative :\n");
            
            #line default
            #line hidden
            
            #line 341 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 if(Law.differentiable == true) { 
            
            #line default
            #line hidden
            
            #line 342 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  {\n");
            
            #line default
            #line hidden
            
            #line 343 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in all_properties) { 
            
            #line default
            #line hidden
            
            #line 344 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& ");
            
            #line default
            #line hidden
            
            #line 344 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 344 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.values(m_");
            
            #line default
            #line hidden
            
            #line 344 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 344 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 345 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 }
            
            #line default
            #line hidden
            
            #line 346 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in Outputs) { 
            
            #line default
            #line hidden
            
            #line 347 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto& d");
            
            #line default
            #line hidden
            
            #line 347 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 347 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = accessor.derivatives(m_");
            
            #line default
            #line hidden
            
            #line 347 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 347 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n");
            
            #line default
            #line hidden
            
            #line 348 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 349 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    auto size = ");
            
            #line default
            #line hidden
            
            #line 349 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( static_size ));
            
            #line default
            #line hidden
            
            #line 349 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
Inputs.Where(p => p.dimension == Dimension.vectorial)
      .Select(p => String.Format(" + m_{0}.size()", p.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 351 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(";\n");
            
            #line default
            #line hidden
            
            #line 352 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in Outputs.Where(p => p.dimension == Dimension.scalar)) { 
            
            #line default
            #line hidden
            
            #line 353 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    d");
            
            #line default
            #line hidden
            
            #line 353 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 353 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".resize(d");
            
            #line default
            #line hidden
            
            #line 353 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 353 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".dim1Size(), size);\n");
            
            #line default
            #line hidden
            
            #line 354 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 }
   foreach(var p in Outputs.Where(p => p.dimension == Dimension.vectorial)) { 
            
            #line default
            #line hidden
            
            #line 356 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    d");
            
            #line default
            #line hidden
            
            #line 356 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 356 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".resize(d");
            
            #line default
            #line hidden
            
            #line 356 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 356 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".dim1Size(), m_");
            
            #line default
            #line hidden
            
            #line 356 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 356 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".size(), size);\n");
            
            #line default
            #line hidden
            
            #line 357 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 358 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    for(int i = begin; i < end; ++i) {\n      m_algo.evaluate(");
            
            #line default
            #line hidden
            
            #line 359 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
         Inputs.Select(e => String.Format("{0}[i],", e.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 360 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
        Outputs.Select(e => String.Format("{0}[i],d{0}[i]", e.Name)).Pack(",") ));
            
            #line default
            #line hidden
            
            #line 361 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( 
     Parameters.Select(e => String.Format(",{0}[i]", e.Name)).Pack() ));
            
            #line default
            #line hidden
            
            #line 362 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(");\n    }\n  }\n");
            
            #line default
            #line hidden
            
            #line 365 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 
  } else { 

            
            #line default
            #line hidden
            
            #line 368 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("    fatal() << \"Law ");
            
            #line default
            #line hidden
            
            #line 368 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 368 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" is not differentiable\";\n");
            
            #line default
            #line hidden
            
            #line 369 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 
  }

            
            #line default
            #line hidden
            
            #line 372 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  break;\n  default:\n    throw Arcane::FatalErrorException(\"evaluation case default error\");\n  }\n}\n\n/*---------------------------------------------------------------------------*/\n\nvoid\n");
            
            #line default
            #line hidden
            
            #line 381 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name ));
            
            #line default
            #line hidden
            
            #line 381 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LawObject::\ninit(Gump::Entity root)\n{\n  if(m_initialized) return;\n  \n  m_root = root;\n  \n  configure();\n  \n  Gump::XPath<Gump::Property> xpath;\n    \n");
            
            #line default
            #line hidden
            
            #line 392 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 foreach(var p in Inputs) { 
            
            #line default
            #line hidden
            
            #line 393 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  if(m_");
            
            #line default
            #line hidden
            
            #line 393 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 393 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".uniqueId() == -1) {\n    bool error = false;\n    if(options()->properties.size() == 0 || \n       options()->properties[0].inputs.size() == 0 ||\n       options()->properties[0].inputs[0].");
            
            #line default
            #line hidden
            
            #line 397 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.ObjectName ));
            
            #line default
            #line hidden
            
            #line 397 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".size() == 0) {\n      error = true;\n    } else {\n      auto& o = options()->properties[0].inputs[0].");
            
            #line default
            #line hidden
            
            #line 400 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.ObjectName ));
            
            #line default
            #line hidden
            
            #line 400 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("[0];\n      auto& name = o.name;\n      auto& id = o.id;\n      auto& path = o.path;\n      if(path.isPresent()) {\n        if(name.isPresent() || id.isPresent()) {\n          fatal() << \"path, name and id of property ");
            
            #line default
            #line hidden
            
            #line 406 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 406 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are defined in .arc\";\n        }\n        if(m_root.empty()) {\n          fatal() << \"root entity is not defined\";\n        }\n        auto p = xpath(m_root,path());\n        m_");
            
            #line default
            #line hidden
            
            #line 412 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 412 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = p.cast<");
            
            #line default
            #line hidden
            
            #line 412 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 412 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(">();\n      } else if(name.isPresent() && id.isPresent()) {\n        if(path.isPresent()) {\n          fatal() << \"path, name and id of property ");
            
            #line default
            #line hidden
            
            #line 415 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 415 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are defined in .arc\";\n        }\n        m_");
            
            #line default
            #line hidden
            
            #line 417 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 417 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = ");
            
            #line default
            #line hidden
            
            #line 417 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 417 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("(o.id(), o.name());\n      } else {\n        fatal() << \"path or {name and id} of property ");
            
            #line default
            #line hidden
            
            #line 419 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 419 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are missing in .arc\";\n      }\n    }\n    if(error)\n      fatal() << \"Property ");
            
            #line default
            #line hidden
            
            #line 423 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 423 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" is not initialized - use .arc or configure() method\";\n  }\n  m_inputs << m_");
            
            #line default
            #line hidden
            
            #line 425 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 425 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(";\n");
            
            #line default
            #line hidden
            
            #line 426 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 

   foreach(var p in Outputs) { 
            
            #line default
            #line hidden
            
            #line 429 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  if(m_");
            
            #line default
            #line hidden
            
            #line 429 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 429 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".uniqueId() == -1) {\n    bool error = false;\n    if(options()->properties.size() == 0 || \n       options()->properties[0].outputs.size() == 0 ||\n       options()->properties[0].outputs[0].");
            
            #line default
            #line hidden
            
            #line 433 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.ObjectName ));
            
            #line default
            #line hidden
            
            #line 433 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".size() == 0) {\n      error = true;\n    } else {\n      auto& o = options()->properties[0].outputs[0].");
            
            #line default
            #line hidden
            
            #line 436 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.ObjectName ));
            
            #line default
            #line hidden
            
            #line 436 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("[0];\n      auto& name = o.name;\n      auto& id = o.id;\n      auto& path = o.path;\n      if(path.isPresent()) {\n        if(name.isPresent() || id.isPresent()) {\n          fatal() << \"path, name and id of property ");
            
            #line default
            #line hidden
            
            #line 442 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 442 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are defined in .arc\";\n        }\n        auto p = xpath(m_root,path());\n        m_");
            
            #line default
            #line hidden
            
            #line 445 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 445 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = p.cast<");
            
            #line default
            #line hidden
            
            #line 445 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 445 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(">();\n      } else if(name.isPresent() && id.isPresent()) {\n        if(path.isPresent()) {\n          fatal() << \"path, name and id of property ");
            
            #line default
            #line hidden
            
            #line 448 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 448 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are defined in .arc\";\n        }\n        m_");
            
            #line default
            #line hidden
            
            #line 450 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 450 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = ");
            
            #line default
            #line hidden
            
            #line 450 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 450 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("(o.id(), o.name());\n      } else {\n        fatal() << \"path or {name and id} of property ");
            
            #line default
            #line hidden
            
            #line 452 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 452 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are missing in .arc\";\n      }\n    }\n    if(error)\n      fatal() << \"Property ");
            
            #line default
            #line hidden
            
            #line 456 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 456 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" is not initialized - use .arc or configure() method\";\n  }\n  m_outputs << m_");
            
            #line default
            #line hidden
            
            #line 458 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 458 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(";\n");
            
            #line default
            #line hidden
            
            #line 459 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 

   foreach(var p in Parameters) { 
            
            #line default
            #line hidden
            
            #line 462 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  if(m_");
            
            #line default
            #line hidden
            
            #line 462 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 462 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".uniqueId() == -1) {\n    bool error = false;\n    if(options()->properties.size() == 0 || \n       options()->properties[0].parameters.size() == 0 ||\n       options()->properties[0].parameters[0].");
            
            #line default
            #line hidden
            
            #line 466 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.ObjectName ));
            
            #line default
            #line hidden
            
            #line 466 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(".size() == 0) {\n      error = true;\n    } else {\n      auto& o = options()->properties[0].parameters[0].");
            
            #line default
            #line hidden
            
            #line 469 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.ObjectName ));
            
            #line default
            #line hidden
            
            #line 469 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("[0];\n      auto& name = o.name;\n      auto& id = o.id;\n      auto& path = o.path;\n      if(path.isPresent()) {\n        if(name.isPresent() || id.isPresent()) {\n          fatal() << \"path, name and id of property ");
            
            #line default
            #line hidden
            
            #line 475 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 475 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are defined in .arc\";\n        }\n        auto p = xpath(m_root,path());\n        m_");
            
            #line default
            #line hidden
            
            #line 478 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 478 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = p.cast<");
            
            #line default
            #line hidden
            
            #line 478 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 478 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(">();\n      } else if(name.isPresent() && id.isPresent()) {\n        if(path.isPresent()) {\n          fatal() << \"path, name and id of property ");
            
            #line default
            #line hidden
            
            #line 481 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 481 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are defined in .arc\";\n        }\n        m_");
            
            #line default
            #line hidden
            
            #line 483 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 483 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" = ");
            
            #line default
            #line hidden
            
            #line 483 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.PropertyType ));
            
            #line default
            #line hidden
            
            #line 483 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("(o.id(), o.name());\n      } else {\n        fatal() << \"path or {name and id} of property ");
            
            #line default
            #line hidden
            
            #line 485 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 485 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" are missing in .arc\";\n      }\n    }\n    if(error)\n      fatal() << \"Property ");
            
            #line default
            #line hidden
            
            #line 489 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.name ));
            
            #line default
            #line hidden
            
            #line 489 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(" is not initialized - use .arc or configure() method\";\n  }\n  m_parameters << m_");
            
            #line default
            #line hidden
            
            #line 491 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( p.Name ));
            
            #line default
            #line hidden
            
            #line 491 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(";\n");
            
            #line default
            #line hidden
            
            #line 492 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
 } 
            
            #line default
            #line hidden
            
            #line 493 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("  \n  m_initialized = true;\n}\n\n/*---------------------------------------------------------------------------*/\n/*---------------------------------------------------------------------------*/\n\n#endif /* ARCGEOSIM_GENERATED_");
            
            #line default
            #line hidden
            
            #line 500 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture( Law.name.ToUpper() ));
            
            #line default
            #line hidden
            
            #line 500 "/work/IRLIN276_1/desrozis/IFPEN/working/ArcaneDemo-Gump/common/ArcaneInfra/tools/ArcaneInfra.Tools/LawCompiler/LawServiceHeaderT4.tt"
            this.Write("LAWOBJECT_H */\n");
            
            #line default
            #line hidden
            return this.GenerationEnvironment.ToString();
        }
        
        protected virtual void Initialize() {
        }
    }
    
    public class LawServiceHeaderT4Base {
        
        private global::System.Text.StringBuilder builder;
        
        private global::System.Collections.Generic.IDictionary<string, object> session;
        
        private global::System.CodeDom.Compiler.CompilerErrorCollection errors;
        
        private string currentIndent = string.Empty;
        
        private global::System.Collections.Generic.Stack<int> indents;
        
        private ToStringInstanceHelper _toStringHelper = new ToStringInstanceHelper();
        
        public virtual global::System.Collections.Generic.IDictionary<string, object> Session {
            get {
                return this.session;
            }
            set {
                this.session = value;
            }
        }
        
        public global::System.Text.StringBuilder GenerationEnvironment {
            get {
                if ((this.builder == null)) {
                    this.builder = new global::System.Text.StringBuilder();
                }
                return this.builder;
            }
            set {
                this.builder = value;
            }
        }
        
        protected global::System.CodeDom.Compiler.CompilerErrorCollection Errors {
            get {
                if ((this.errors == null)) {
                    this.errors = new global::System.CodeDom.Compiler.CompilerErrorCollection();
                }
                return this.errors;
            }
        }
        
        public string CurrentIndent {
            get {
                return this.currentIndent;
            }
        }
        
        private global::System.Collections.Generic.Stack<int> Indents {
            get {
                if ((this.indents == null)) {
                    this.indents = new global::System.Collections.Generic.Stack<int>();
                }
                return this.indents;
            }
        }
        
        public ToStringInstanceHelper ToStringHelper {
            get {
                return this._toStringHelper;
            }
        }
        
        public void Error(string message) {
            this.Errors.Add(new global::System.CodeDom.Compiler.CompilerError(null, -1, -1, null, message));
        }
        
        public void Warning(string message) {
            global::System.CodeDom.Compiler.CompilerError val = new global::System.CodeDom.Compiler.CompilerError(null, -1, -1, null, message);
            val.IsWarning = true;
            this.Errors.Add(val);
        }
        
        public string PopIndent() {
            if ((this.Indents.Count == 0)) {
                return string.Empty;
            }
            int lastPos = (this.currentIndent.Length - this.Indents.Pop());
            string last = this.currentIndent.Substring(lastPos);
            this.currentIndent = this.currentIndent.Substring(0, lastPos);
            return last;
        }
        
        public void PushIndent(string indent) {
            this.Indents.Push(indent.Length);
            this.currentIndent = (this.currentIndent + indent);
        }
        
        public void ClearIndent() {
            this.currentIndent = string.Empty;
            this.Indents.Clear();
        }
        
        public void Write(string textToAppend) {
            this.GenerationEnvironment.Append(textToAppend);
        }
        
        public void Write(string format, params object[] args) {
            this.GenerationEnvironment.AppendFormat(format, args);
        }
        
        public void WriteLine(string textToAppend) {
            this.GenerationEnvironment.Append(this.currentIndent);
            this.GenerationEnvironment.AppendLine(textToAppend);
        }
        
        public void WriteLine(string format, params object[] args) {
            this.GenerationEnvironment.Append(this.currentIndent);
            this.GenerationEnvironment.AppendFormat(format, args);
            this.GenerationEnvironment.AppendLine();
        }
        
        public class ToStringInstanceHelper {
            
            private global::System.IFormatProvider formatProvider = global::System.Globalization.CultureInfo.InvariantCulture;
            
            public global::System.IFormatProvider FormatProvider {
                get {
                    return this.formatProvider;
                }
                set {
                    if ((this.formatProvider == null)) {
                        throw new global::System.ArgumentNullException("formatProvider");
                    }
                    this.formatProvider = value;
                }
            }
            
            public string ToStringWithCulture(object objectToConvert) {
                if ((objectToConvert == null)) {
                    throw new global::System.ArgumentNullException("objectToConvert");
                }
                global::System.Type type = objectToConvert.GetType();
                global::System.Type iConvertibleType = typeof(global::System.IConvertible);
                if (iConvertibleType.IsAssignableFrom(type)) {
                    return ((global::System.IConvertible)(objectToConvert)).ToString(this.formatProvider);
                }
                global::System.Reflection.MethodInfo methInfo = type.GetMethod("ToString", new global::System.Type[] {
                            iConvertibleType});
                if ((methInfo != null)) {
                    return ((string)(methInfo.Invoke(objectToConvert, new object[] {
                                this.formatProvider})));
                }
                return objectToConvert.ToString();
            }
        }
    }
}
