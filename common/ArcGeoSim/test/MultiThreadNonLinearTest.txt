# -*- cmake -*-
IF(HARTS_FOUND)
IF(GPUSOLVER_FOUND)
ARCGEOSIM_ADD_TEST(MultiThreadNonLinearTest
  ArcGeoSim
  ${ARCGESIM_TEST_DIR}/ArcGeoSim/test/ServiceTests/NonLinearSolver 
  TestNonLinearSolverPTH.arc
  ENVIRONMENT ARCANE_ENABLE_HARTS=1
  ENVIRONMENT ARCANE_NB_THREAD=8
  ENVIRONMENT ARCANE_THREAD_IMPLEMENTATION=TBB
  ENVIRONMENT ARCANE_TASK_IMPLEMENTATION=TBB
  ENVIRONMENT ARCANE_NB_TASK=8
  )
ENDIF(GPUSOLVER_FOUND)
ENDIF(HARTS_FOUND)

