#include "BiLinearPieceWiseFunctionService.h"
/* Author : dechaiss at Wed Oct 14 10:22:34 2009
 * Generated by createNew
 */

using namespace Arcane;

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

void
BiLinearPieceWiseFunctionService::init()
{
  if (m_initialized)
    return;

  info() << A_FUNCINFO;

  //! Define boundary behavior of tabulated function
  initBorderCondition(options()->borderCondition().borderType(),
      options()->borderCondition.prolongationType(),
      options()->borderCondition.borderLimits().lowerRowLimit(),
      options()->borderCondition.borderLimits().upperRowLimit(),
      options()->borderCondition.borderLimits().lowerColLimit(),
      options()->borderCondition.borderLimits().upperColLimit(),
      options()->borderCondition.cutType());

  setvariableName(1, options()->rowName());
  setvariableName(1, options()->colName());

  //! Fill table vector by vector
  //! Assume Indexes values are strictly increasing
  //! check is done by addTableVector
  const auto& Indexes = options()->vectorIndexes();
  for (Integer iVec = 0; iVec < options()->vector.size(); ++iVec)
    {
      addTableVector(Indexes, options()->vector[iVec].index(),
          options()->vector[iVec].values(), options()->vectorType());
    }

  //! Init PieceWiseFunctionR1vR1T<BiLinearInterpolator> (must be done after filling table)
  PieceWiseFunctionR2vR1T<BiLinearInterpolator>::init();

  //! Debug Print
  if (options()->printTable())
    printPoints();

  m_initialized = true;
}

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

ARCANE_REGISTER_SERVICE_BILINEARPIECEWISEFUNCTION(BiLinearPieceWiseFunction,BiLinearPieceWiseFunctionService);
