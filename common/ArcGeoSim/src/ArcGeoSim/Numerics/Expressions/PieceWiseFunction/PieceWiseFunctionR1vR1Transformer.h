// -*- C++ -*-
#ifndef ARCGEOSIM_NUMERICS_EXPRESSIONS_PIECEWISEFUNCTIONR1VR1TRANSFORMER_H
#define ARCGEOSIM_NUMERICS_EXPRESSIONS_PIECEWISEFUNCTIONR1VR1TRANSFORMER_H
/* Author : dechaiss at Wed Jan 27 13:37:39 2010
 * Generated by createNew
 */

#include <arcane/utils/ITraceMng.h>

#include "ArcGeoSim/Numerics/Expressions/IFunctionR1vR1Transformer.h"
#include "ArcGeoSim/Numerics/Expressions/PieceWiseFunction/PieceWiseFunctionR1vR1.h"
#include "ArcGeoSim/Numerics/Expressions/PieceWiseFunction/LinearPieceWiseFunction/LinearInterpolator.h"
#include "ArcGeoSim/Numerics/Expressions/PieceWiseFunction/LogLinearPieceWiseFunction/LogLinearInterpolator.h"
#include "ArcGeoSim/Numerics/Expressions/PieceWiseFunction/ConstantPieceWiseFunction/ConstantInterpolator.h"
#include "ArcGeoSim/Numerics/Expressions/PieceWiseFunction/AndradePieceWiseFunction/AndradeInterpolator.h"

struct TransformationType
  {
  enum eTransformationType
    {
    Clone, ShiftRescale
    };
  };

class PieceWiseFunctionR1vR1Transformer : public IFunctionR1vR1Transformer
  {
public:
  /** Constructor: one constructor for each elementary transformation */
  
  /** Clone */
  PieceWiseFunctionR1vR1Transformer(ITraceMng* trace_mng) :
    m_trace_mng(trace_mng), m_transformation_type(TransformationType::Clone) 
    {
      ;
    }

  /** Shift Rescaled */
  PieceWiseFunctionR1vR1Transformer(ITraceMng* trace_mng, const Real& new_xmin,
      const Real& new_xmax, const Real& new_ymin, const Real& new_ymax) :
    m_trace_mng(trace_mng), m_transformation_type(
        TransformationType::ShiftRescale), m_new_xmin(new_xmin),  m_new_xmax(new_xmax), m_new_ymin(
        new_ymin), m_new_ymax(new_ymax)
    {
      ;
    }

  /** Destructor */
  virtual
  ~PieceWiseFunctionR1vR1Transformer()
    {
    }

public:

  /** Create transformed IFunction for IPieceWiseFunction */
  IFunctionR1vR1*
  createTransformedIFunction(const IFunctionR1vR1* const original_ifunction) const;

private:

  ITraceMng* m_trace_mng;
  TransformationType::eTransformationType m_transformation_type;
  Real m_new_xmin,m_new_xmax, m_new_ymin, m_new_ymax;

  /** IPieceWiseFunction transformer **/
  template<typename T>
  PieceWiseFunctionR1vR1T<T>*
    createTransformedIPieceWiseFunctionT(
        const PieceWiseFunctionR1vR1T<T>& original_ipiecewisefunction) const;

  /** IPieceWiseFunction clone **/
  template<typename T>
  PieceWiseFunctionR1vR1T<T>*
    cloneT(const PieceWiseFunctionR1vR1T<T>& original_piecewisefunction) const;

  /** IPieceWiseFunction shift rescaled **/
  template<typename T>
  PieceWiseFunctionR1vR1T<T>*
    shiftRescaleT(const PieceWiseFunctionR1vR1T<T>& original_piecewisefunction) const;

  };

#endif /* ARCGEOSIM_NUMERICS_EXPRESSIONS_PIECEWISEFUNCTIONR1VR1TRANSFORMER_H */
