#include "PieceWiseFunctionR1vR1Transformer.h"
/* Author : dechaiss at Wed Jan 27 13:37:39 2010
 * Generated by createNew
 */

/*---------------------------------------------------------------------------*/

IFunctionR1vR1*
PieceWiseFunctionR1vR1Transformer::
createTransformedIFunction(const IFunctionR1vR1* const original_ifunction) const
{
  //! Cast in IPieceWiseFunction
  const IPieceWiseFunction* original_ipiecewisefunction =
    dynamic_cast<const IPieceWiseFunction*> (original_ifunction);

  //! get info on original piecewise
  PieceWiseFunctionType original_type;
  original_ipiecewisefunction->getPieceWiseFunctionType(original_type);

  //! Switch on interpolator type
  switch (original_type.m_interpolator_type)
    {
    case PieceWiseFunctionType::LinearInterpolator:
      return createTransformedIPieceWiseFunctionT<
      LinearInterpolator> (dynamic_cast<const PieceWiseFunctionR1vR1T<
                           LinearInterpolator>&> (*original_ipiecewisefunction));
      break;
    case PieceWiseFunctionType::LogLinearInterpolator:
      return createTransformedIPieceWiseFunctionT<
      LogLinearInterpolator> (dynamic_cast<const PieceWiseFunctionR1vR1T<
                              LogLinearInterpolator>&> (*original_ipiecewisefunction));
      break;
    case PieceWiseFunctionType::ConstantInterpolator:
      return createTransformedIPieceWiseFunctionT<
      ConstantInterpolator> (dynamic_cast<const PieceWiseFunctionR1vR1T<
                             ConstantInterpolator>&> (*original_ipiecewisefunction));
      break;
    case PieceWiseFunctionType::AndradeInterpolator:
      return createTransformedIPieceWiseFunctionT<
      AndradeInterpolator> (dynamic_cast<const PieceWiseFunctionR1vR1T<
                            AndradeInterpolator>&> (*original_ipiecewisefunction));
    default:
      return NULL;
    }
}

/*---------------------------------------------------------------------------*/

template<typename T>
PieceWiseFunctionR1vR1T<T>*
PieceWiseFunctionR1vR1Transformer::
createTransformedIPieceWiseFunctionT(const PieceWiseFunctionR1vR1T<T>& original_ipiecewisefunction) const
{
  //! Choose type of transformation
  switch (m_transformation_type)
    {
      //! Clone
    case TransformationType::Clone:
      return cloneT(original_ipiecewisefunction);
      //! ShiftRescale
    case TransformationType::ShiftRescale:
      return shiftRescaleT(original_ipiecewisefunction);
    default:
      return NULL;
    }
}

/*---------------------------------------------------------------------------*/

template<typename T>
PieceWiseFunctionR1vR1T<T>*
PieceWiseFunctionR1vR1Transformer::
cloneT(const PieceWiseFunctionR1vR1T<T>& original_ipiecewisefunction) const
{
  //! Create new
  PieceWiseFunctionR1vR1T<T>* new_piecewisefunction =
    new PieceWiseFunctionR1vR1T<T> (m_trace_mng);
  //! Copy
  new_piecewisefunction->clone(original_ipiecewisefunction);

  return new_piecewisefunction;
}

/*---------------------------------------------------------------------------*/

template<typename T>
PieceWiseFunctionR1vR1T<T>*
PieceWiseFunctionR1vR1Transformer::
shiftRescaleT(const PieceWiseFunctionR1vR1T<T>& original_ipiecewisefunction) const
{
  //! Create new
  PieceWiseFunctionR1vR1T<T>* new_piecewisefunction =
    new PieceWiseFunctionR1vR1T<T> (m_trace_mng);
  //! Copy
  new_piecewisefunction->clone(original_ipiecewisefunction);
  //! Shift rescale
  new_piecewisefunction->shiftRescale(m_new_xmin, m_new_xmax, m_new_ymin, m_new_ymax);

  return new_piecewisefunction;
}

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/
