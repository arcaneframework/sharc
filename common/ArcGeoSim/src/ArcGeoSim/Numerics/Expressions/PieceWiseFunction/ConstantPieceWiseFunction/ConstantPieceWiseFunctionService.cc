#include "ConstantPieceWiseFunctionService.h"
/* Author : dechaiss at Mon Oct 19 15:53:58 2009
 * Generated by createNew
 */

using namespace Arcane;

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

void
ConstantPieceWiseFunctionService::init()
  {
    if (m_initialized)
      return;

    info() << A_FUNCINFO;

    setVariableName(options()->variable());

    const Integer size_x = options()->x.size();
    const Integer size_y = options()->y.size();

    if (size_y != size_x)
      {
        fatal() << A_FUNCINFO << " nb points x != nb points y";
      }

    //! Define boundary behavior of tabulated function
    initBorderCondition(options()->borderCondition().borderType(),
        options()->borderCondition.prolongationType(),
        options()->borderCondition.borderLimits().lowerLimit(),
        options()->borderCondition.borderLimits().upperLimit(),
        options()->borderCondition.cutType());

    //! Fill Table
    for (Integer iPoint = 0; iPoint < size_x; ++iPoint)
      {
        setPoint(options()->x[iPoint], options()->y[iPoint]);
      }

    //! Init PieceWiseFunctionR1vR1T<LinearInterpolator> (must be done after filling table)
    PieceWiseFunctionR1vR1T<ConstantInterpolator>::init();

    //! Debug Print
    //      printPoints();

    m_initialized = true;
  }

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

ARCANE_REGISTER_SERVICE_CONSTANTPIECEWISEFUNCTION(ConstantPieceWiseFunction,ConstantPieceWiseFunctionService);
