#include "AndradePieceWiseFunctionService.h"
/* Author : Author : ricois at Tue Jun 21 13:56:57 2012
 * Generated by createNew
 */

using namespace Arcane;

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

void
AndradePieceWiseFunctionService::init()
  {
    if (m_initialized)
      return;

    info() << A_FUNCINFO;

    setVariableName(options()->variable());

    const Integer size_x = options()->x.size();
    const Integer size_y = options()->y.size();

    if (size_y != size_x)
      {
        fatal() << A_FUNCINFO << " nb points x != nb points y";
      }

    //! Define boundary behavior of tabulated function
    initBorderCondition(options()->borderCondition().borderType(),
        options()->borderCondition.prolongationType(),
        options()->borderCondition.borderLimits().lowerLimit(),
        options()->borderCondition.borderLimits().upperLimit(),
        options()->borderCondition.cutType());

    //! Fill table
    for (Integer iPoint = 0; iPoint < size_x; ++iPoint)
      {
        setPoint(options()->x[iPoint], options()->y[iPoint]);
      }

    //! Init PieceWiseFunctionR1vR1T<AndradeInterpolator> (must be done after filling table)
    PieceWiseFunctionR1vR1T<AndradeInterpolator>::init();

    // Debug Print
    //    printPoints();

    m_initialized = true;
  }

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

ARCANE_REGISTER_SERVICE_ANDRADEPIECEWISEFUNCTION(AndradePieceWiseFunction,AndradePieceWiseFunctionService);
