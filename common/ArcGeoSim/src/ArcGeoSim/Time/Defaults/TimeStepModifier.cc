// -*- tab-width: 2; indent-tabs-mode: nil; coding: utf-8-with-signature -*-
//-----------------------------------------------------------------------------
// Copyright 2000-2022 CEA (www.cea.fr) IFPEN (www.ifpenergiesnouvelles.com)
// See the top-level COPYRIGHT file for details.
// SPDX-License-Identifier: Apache-2.0
//-----------------------------------------------------------------------------
#include "TimeStepModifier.h"
/* Author : desrozis at Wed Nov 12 09:46:49 2014
 * Generated by createNew
 */

#ifdef WIN32
#include <ciso646>
#endif

#include <arcane/ISubDomain.h>

/*---------------------------------------------------------------------------*/

ArcGeoSim::TimeStepModifier::
TimeStepModifier(Arcane::String name,
                 Arcane::Real date,
                 const Optional<Arcane::Real>& new_min_dt,
                 const Optional<Arcane::Real>& new_max_dt,
                 const Optional<Arcane::Real>& new_dt)
  : Event(name,date,TimeStep::BeforeRestoreSave())
  , m_new_min_dt(new_min_dt)
  , m_new_max_dt(new_max_dt)
  , m_new_dt(new_dt) {}

/*---------------------------------------------------------------------------*/

void
ArcGeoSim::TimeStepModifier::
execute()
{
  if(not m_new_min_dt.null()) {
    m_min_dt = m_new_min_dt();
  }
  if(not m_new_max_dt.null()) {
    m_max_dt = m_new_max_dt();
  }
  if(not m_new_dt.null()) {
    m_forced_dt = m_new_dt();
  }
}

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/
