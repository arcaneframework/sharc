// -*- tab-width: 2; indent-tabs-mode: nil; coding: utf-8-with-signature -*-
//-----------------------------------------------------------------------------
// Copyright 2000-2025 CEA (www.cea.fr) IFPEN (www.ifpenergiesnouvelles.com)
// See the top-level COPYRIGHT file for details.
// SPDX-License-Identifier: Apache-2.0
//-----------------------------------------------------------------------------
#include "ContactGroupImpl.h"
/* Author : havep at Tue Jul  9 17:33:48 2013
 * Generated by createNew
 */

#include <arcane/utils/FatalErrorException.h>
#include "ArcGeoSim/Mesh/SurfaceUtils/IContactFamily.h"

/*---------------------------------------------------------------------------*/

ContactGroupImpl::
ContactGroupImpl(IContactFamily * family, Arcane::Int32SharedArray lids,
                 const String & name, const bool protect) 
  : m_family(family), m_local_ids(lids), m_name(name), m_protect(protect)
{
  ;
}

/*---------------------------------------------------------------------------*/

// ContactGroupImpl::
// ContactGroupImpl(IContactFamily * family, const Int32ConstArrayView & lids,
//                  const String & name, const bool protect) 
//   : m_family(family), m_local_ids(lids), m_name(name), m_protect(protect)
// {
//   ;
// }

/*---------------------------------------------------------------------------*/

ContactGroupImpl::
~ContactGroupImpl() 
{
  ;
}

/*---------------------------------------------------------------------------*/

ContactEnumerator 
ContactGroupImpl::
enumerator() const
{ 
  return ContactEnumerator(m_family->contactsInternal(),m_local_ids); 
}

/*---------------------------------------------------------------------------*/

void 
ContactGroupImpl::
setItems(ConstArrayView<Int32> lids)
{
  ARCANE_ASSERT((m_family!=NULL),("Inconsistent NULL family"));
  if (m_protect)
    throw Arcane::FatalErrorException(A_FUNCINFO,"Cannot modify protected group");
  m_local_ids.copy(lids);
  m_family->notifyGroupChange(this);
}

/*---------------------------------------------------------------------------*/

void 
ContactGroupImpl::
addItems(ConstArrayView<Int32> lids)
{
  ARCANE_ASSERT((m_family!=NULL),("Inconsistent NULL family"));
  if (m_protect)
    throw Arcane::FatalErrorException(A_FUNCINFO,"Cannot modify protected group");

//#ifndef NO_USER_WARNING
//#ifndef WIN32
//#warning "TODO: not implemented or useless ?"
//#endif
//#endif /* NO_USER_WARNING */
  Arcane::FatalErrorException(A_FUNCINFO,"Not yet available");

  m_local_ids.reserve(m_local_ids.size()+lids.size()) ;
  for(Integer i=0;i<lids.size();++i)
    m_local_ids.add(lids[i]);
  m_family->notifyGroupChange(this);
}

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/
