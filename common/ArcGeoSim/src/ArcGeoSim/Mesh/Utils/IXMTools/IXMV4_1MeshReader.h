// -*- C++ -*-
#ifndef ARCGEOSIM_ARCGEOSIM_MESH_UTILS_IXMTOOLS_IXMV4_1MESHREADER_H
#define ARCGEOSIM_ARCGEOSIM_MESH_UTILS_IXMTOOLS_IXMV4_1MESHREADER_H
/* Author : dechaiss at Wed Jul 18 14:32:13 2012
 * Generated by createNew
 */

#include <arcane/IIOMng.h>
#include <arcane/utils/ITraceMng.h>
#include <arcane/XmlNodeList.h>
#include <arcane/IXmlDocumentHolder.h>


#include "ArcGeoSim/Utils/ArcGeoSim.h"
#include "ArcGeoSim/Mesh/Utils/IXMTools/IIXMMeshReader.h"
#include "ArcGeoSim/Mesh/Utils/IXMTools/IXMTools.h"
#include "ArcGeoSim/Mesh/Utils/IXMTools/IXMMeshReaderTools.h"
#include "ArcGeoSim/Utils/ParallelUtils.h"
#include "IXMV4MeshReader.h"

BEGIN_ARCGEOSIM_NAMESPACE

class IXMV4_1MeshReader : public IXMV4MeshReader
{
public:
  
  /** Constructeur de la classe */
  IXMV4_1MeshReader(Arcane::IIOMng *io_mng, Arcane::IParallelMng *parallel_mng,
                    Arcane::ITraceMng *trace_mng);
  
  /** Destructeur de la classe */
  virtual ~IXMV4_1MeshReader();
  
public:

  //! === Interface IIXMMeshReaderBase ===

  //! Chargement du fichier de maillage. Retourne le rï¿½pertoire du fichier de maillage
  Arcane::String loadMeshFile(const IXMMeshFile mesh_file);

  //! Lecture des donnees du maillage
  void readCellData(IXMCellData& cell_data, const IXMMeshInfo& check_mesh_info);

#ifdef USE_EVOLUTIF
  //! Lecture des donnees de l'increment de maillage
  void readCellIncrementData(IXMCellIncrementData& cell_increment_data,const IXMMeshInfo& check_mesh_info);
#endif
private:
   typedef IXMV4MeshReader super;
    static const int min_exotic_type_value=10000;
    void _readCellInfos(const Arcane::XmlNodeList& cell_list_node, const String& block_name, ItemTypeMng * typeMng,
                        Arcane::Int64Array & cell_uids, Arcane::Int64Array & cell_infos,const IXMMeshInfo& check_mesh_info);

#ifdef USE_EVOLUTIF
    bool _isTopologyIncrementLoaded();
#endif

};

END_ARCGEOSIM_NAMESPACE

#endif /* ARCGEOSIM_ARCGEOSIM_MESH_UTILS_IXMTOOLS_IXMV4MESHREADER_H */
