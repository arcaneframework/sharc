#include "IXMDataExchanger.h"
/* Author : dechaiss at Thu Oct 25 10:54:34 2012
 * Generated by createNew
 */

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/

 ArcGeoSim::IXMDataExchanger* ArcGeoSim::IXMDataExchanger::m_instance = NULL;

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/


ArcGeoSim::IXMDataExchanger*
ArcGeoSim::IXMDataExchanger::
instance()
{
  if (!m_instance) m_instance = new ArcGeoSim::IXMDataExchanger();
  return m_instance;
}
/*---------------------------------------------------------------------------*/

void
ArcGeoSim::IXMDataExchanger::
setMeshFile(const Arcane::String& filename)
{
  m_filename = filename;
  if (!m_receiver.empty()) _getMeshFile();
}

void
ArcGeoSim::IXMDataExchanger::
setMeshType(const Arcane::String& mesh_type)
{
  m_mesh_type = mesh_type;
  if (!m_receiver.empty()) _getMeshType();
}

/*---------------------------------------------------------------------------*/

void
ArcGeoSim::IXMDataExchanger::
registerReceiver(IXMDataReceiver* receiver)
{
  if (m_receiver.find(receiver) == m_receiver.end()) m_receiver.insert(receiver);
  if (!m_filename.empty()) _getMeshFile();
  if (!m_mesh_type.empty()) _getMeshType();
}

void
ArcGeoSim::IXMDataExchanger::
unregisterReceiver(IXMDataReceiver* receiver)
{
  if (m_receiver.find(receiver) != m_receiver.end()) m_receiver.erase(receiver);
}

/*---------------------------------------------------------------------------*/

void
ArcGeoSim::IXMDataExchanger::
_getMeshFile()
{
  for (IXMDataReceivers::iterator ite = m_receiver.begin(); ite != m_receiver.end(); ++ite)
    {
      (*ite)->getMeshFile(m_filename);
    }
}

/*---------------------------------------------------------------------------*/
void
ArcGeoSim::IXMDataExchanger::
_getMeshType()
{
  for (IXMDataReceivers::iterator ite = m_receiver.begin(); ite != m_receiver.end(); ++ite)
    {
      (*ite)->getMeshType(m_mesh_type);
    }
}

/*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*/
